@page
@model LoanHistoryModel
@{
    ViewData["Title"] = "Home page";
}
@section scripts  {
    <script>
        $(document).ready(function () {
            $('#loans').DataTable({
                "processing": true, // for show progress bar
                "serverSide": true,
                "ajax": '/loans',
                "columns": [
                    { "data": "resultId" },
                    { "data": "firstName" },
                    { "data": "loanAmount" },
                    { "data": "approved" },
                    { "data": "denialReason" },
                    { "data": "interestRate" },
                    { "data": "monthlyPayment" }
                ]
            });
        });
    </script>
}

<h1 class="title display-4">Loan Application History</h1>
<p class="lead">
    Here you can view the full history of loan applications with various filtering and sorting options.
</p>
<hr />
<div class="row">
    <div class="col-md-12">
        <table id="loans" class="table table-striped table-bordered dt-responsive nowrap">
            <thead class="thead-light">
                <tr>
                    <th>ID</th>
                    <th>Name</th>
                    <th>Loan Amount</th>
                    <th>Status</th>
                    <th>Reason</th>
                    <th>Interest Rate</th>
                    <th>Payment</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model.LoanApplicationResults)
                {
                    <tr>
                        <td>@item.ResultId</td>
                        <td>@item.FirstName  @item.LastName</td>
                        <td class="text-right">@item.LoanAmount.ToString("c")</td>
                        <td class="text-center">@(item.Approved ? "Approved" : "Denied")</td>
                        <td>@item.DenialReason</td>
                        <td class="text-right">@item.InterestRate?.ToString("0.00%")</td>
                        <td class="text-right">@item.MonthlyPayment?.ToString("c")</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>